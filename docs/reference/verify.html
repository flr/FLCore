<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Verifies the content of FLR objects according to a set of rules"><title>Verify FLR objects — verify • FLCore</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Verify FLR objects — verify"><meta property="og:description" content="Verifies the content of FLR objects according to a set of rules"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FLCore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.6.19.9111</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/flr/FLCore/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Verify FLR objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/flr/FLCore/blob/HEAD/R/genericMethods.R" class="external-link"><code>R/genericMethods.R</code></a>, <a href="https://github.com/flr/FLCore/blob/HEAD/R/FLComp.R" class="external-link"><code>R/FLComp.R</code></a>, <a href="https://github.com/flr/FLCore/blob/HEAD/R/FLStock.R" class="external-link"><code>R/FLStock.R</code></a></small>
      <div class="d-none name"><code>verify.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Verifies the content of FLR objects according to a set of rules</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">verify</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for FLComp</span></span>
<span><span class="fu">verify</span><span class="op">(</span><span class="va">object</span>, <span class="va">...</span>, report <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for FLStock</span></span>
<span><span class="fu">verify</span><span class="op">(</span><span class="va">object</span>, rules <span class="op">=</span> <span class="fu"><a href="ruleset.html">ruleset</a></span><span class="op">(</span><span class="va">object</span><span class="op">)</span>, <span class="va">...</span>, report <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p>An object of any FLR class for which the method has been defined</p></dd>


<dt>...</dt>
<dd><p>Additional rules to be tested, as a formula or list. See details</p></dd>


<dt>report</dt>
<dd><p>Should the standard data.frame report be output (if TRUE) or a single logical value for all tests?</p></dd>


<dt>rules</dt>
<dd><p>Basic set of rules for a given class, as returned by ruleset().</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A data.frame with the results of applying those rules, or a single logical value, if report=FALSE</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Classes' validity functions generally check the structure and dimensions of
objects and their component slots. But some checks on the data content of
objects is often required. The various verify methods implement both a system
to create <em>rules</em> that an object is expected to pass, and a minimum standard
set of rules for each defined class</p>
<p>The data.frame output by the method when <code>report=TRUE</code> contains one row per
rule and the following columns:</p><ul><li><p><em>name</em>, the rule name</p></li>
<li><p><em>items</em>, number of comparisons carried out</p></li>
<li><p><em>passes</em>, number of <em>TRUE</em> values</p></li>
<li><p><em>fails</em>, number of <em>FALSE</em> values</p></li>
<li><p><em>NAs</em>, number of logical NAs</p></li>
<li><p><em>valid</em>, are all values <em>TRUE</em>?</p></li>
<li><p><em>rule</em>, the expression being evaluated</p></li>
</ul><p>Additional rules can be specify in a call to <em>verify</em>, in one of two forms.
Simple rules can be defined as a formula involving methods defined for the
class. A rule such as <code>highm = ~ m &lt; 2</code> will check if values in the <em>m</em> slot are
higher than 2 and return a logical <em>FLQuant</em>.</p>
<p>Some rules cannot simply use existing methods or functions, for example those
operating on all slots of the object, or requiring additional computations.
In this case, the argument to <em>verify</em> can be a list, with an element named
<em>rule</em> of class <em>formula</em> and where test is defined. The test then calls for
a new function, defined as another element of the list, and which will be used
by verify when evaluating the set of rules. See below for examples.</p>
<p>A set of rules has been defined for the <em>FLStock</em> class, available
by calling the ruleset method. The verify method for <em>FLStock</em> will by default
evaluate those rules, as well as any other defined in the call.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="ruleset.html">ruleset</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>The FLR Team</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Verifying a new rule for an FLSR object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">nsher</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># rule: are all recruitment values greater than 0?</span></span></span>
<span class="r-in"><span><span class="fu">verify</span><span class="op">(</span><span class="va">nsher</span>, rec<span class="op">=</span><span class="op">~</span><span class="va">rec</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   name items passes fails NAs valid    rule</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  rec    45     45     0   0  TRUE rec &gt; 0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define rule calling its own function</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ple4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># rule: ssb is less</span></span></span>
<span class="r-in"><span><span class="fu">verify</span><span class="op">(</span><span class="va">ple4</span>, ssbstock <span class="op">=</span> <span class="op">~</span><span class="va">ssb</span> <span class="op">&lt;</span> <span class="va">stock</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            name items passes fails NAs valid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         anyna    17     17     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      catch.wt   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   landings.wt   610    594    16   0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   discards.wt   610    431   179   0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      stock.wt   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           mat   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  harvest.spwn   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        m.spwn   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       harvest   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      cohorts   336    336     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         uoms    17     17     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     ssbstock    61     61     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     rule</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                 !anyna</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                           catch.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        landings.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        discards.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                           stock.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    mat &lt;= 1 &amp; mat &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  harvest.spwn &lt;= 1 &amp; harvest.spwn &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8              m.spwn &lt;= 1 &amp; m.spwn &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                           harvest &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                     ccohorts(stock.n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                  uoms</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                           ssb &lt; stock</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ple4</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># verify for the standard set of rules for FLStock</span></span></span>
<span class="r-in"><span><span class="fu">verify</span><span class="op">(</span><span class="va">ple4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            name items passes fails NAs valid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         anyna    17     17     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      catch.wt   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   landings.wt   610    594    16   0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   discards.wt   610    431   179   0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      stock.wt   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           mat   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  harvest.spwn   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        m.spwn   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       harvest   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      cohorts   336    336     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         uoms    17     17     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     rule</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                 !anyna</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                           catch.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        landings.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        discards.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                           stock.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    mat &lt;= 1 &amp; mat &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  harvest.spwn &lt;= 1 &amp; harvest.spwn &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8              m.spwn &lt;= 1 &amp; m.spwn &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                           harvest &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                     ccohorts(stock.n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                  uoms</span>
<span class="r-in"><span><span class="co"># verify a single rule from set</span></span></span>
<span class="r-in"><span><span class="fu">verify</span><span class="op">(</span><span class="va">ple4</span>, rules<span class="op">=</span><span class="fu"><a href="ruleset.html">ruleset</a></span><span class="op">(</span><span class="va">ple4</span>, <span class="st">'anyna'</span><span class="op">)</span>, report<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add own rule to set</span></span></span>
<span class="r-in"><span><span class="fu">verify</span><span class="op">(</span><span class="va">ple4</span>, m <span class="op">=</span> <span class="op">~</span><span class="va">m</span> <span class="op">&gt;=</span><span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            name items passes fails NAs valid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1         anyna    17     17     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      catch.wt   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   landings.wt   610    594    16   0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   discards.wt   610    431   179   0 FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      stock.wt   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           mat   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  harvest.spwn   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        m.spwn   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       harvest   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      cohorts   336    336     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11         uoms    17     17     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12            m   610    610     0   0  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                     rule</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                 !anyna</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                           catch.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                        landings.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                        discards.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                           stock.wt &gt; 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    mat &lt;= 1 &amp; mat &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  harvest.spwn &lt;= 1 &amp; harvest.spwn &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8              m.spwn &lt;= 1 &amp; m.spwn &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                           harvest &gt;= 0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10                     ccohorts(stock.n)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                                  uoms</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                                m &gt;= 0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Iago Mosqueira, Laurence T. Kell, Philippe Grosjean.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

